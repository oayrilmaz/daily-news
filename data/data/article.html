<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PTD Today | Article</title>
  <meta name="description" content="PTD Today article view." />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Ctext x='50%25' y='55%25' text-anchor='middle' font-size='36' font-family='Georgia,serif'%3EPTD%3C/text%3E%3C/svg%3E">
  <style>
    :root{--ink:#111;--ink2:#444;--line:#e6e6e6;--maxw:900px;}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);}
    header{border-bottom:1px solid var(--line);padding:16px 0;}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:0 16px;}
    .brand{display:flex;align-items:center;gap:12px}
    .mark{width:40px;height:40px;border:2px solid var(--ink);border-radius:50%;display:grid;place-items:center;font-weight:700;font-family:Georgia,serif}
    h1{font-family:Georgia,serif;font-size:34px;line-height:1.15;margin:14px 0}
    .meta{color:#666;font-size:13px;margin-bottom:14px}
    .hero{width:100%;max-height:460px;object-fit:cover;border:1px solid var(--line)}
    .dek{font-size:16px;color:var(--ink2);margin:14px 0 20px}
    .cta{display:inline-block;border:1px solid var(--ink);padding:10px 14px;border-radius:8px;text-decoration:none;color:var(--ink)}
    .cta:hover{background:#f5f5f5}
    .bar{display:flex;gap:10px;align-items:center;margin:8px 0 22px}
    .chip{font-size:11px;border:1px solid var(--line);padding:3px 8px;border-radius:999px;color:#666}
    footer{border-top:1px solid var(--line);margin-top:28px;padding:18px 0 40px;color:#666;font-size:12px}
    .shareRow{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    button.min{border:1px solid var(--line);background:#fafafa;padding:6px 10px;border-radius:6px;cursor:pointer}
    button.min:hover{background:#f2f2f2}
  </style>
</head>
<body>
<header>
  <div class="wrap brand">
    <div class="mark">PTD</div>
    <div>
      <div style="font-family:Georgia,serif;font-weight:700;font-size:22px">PTD Today</div>
      <div style="color:#666;font-size:12px">Power Transmission &amp; Distribution Daily News</div>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="bar">
    <span class="chip" id="tag">—</span>
    <span class="chip" id="ago">—</span>
  </div>

  <h1 id="title">Loading…</h1>
  <img id="img" class="hero" alt="Article image" src="" style="display:none" />
  <p id="dek" class="dek"></p>

  <a id="out" class="cta" target="_blank" rel="noopener">Read the full story at source →</a>

  <div class="shareRow">
    <button class="min" id="shareNative">Share</button>
    <a class="min" id="shareTwitter" target="_blank" rel="noopener">Share to X</a>
    <a class="min" id="shareLinkedIn" target="_blank" rel="noopener">Share to LinkedIn</a>
    <button class="min" id="copyLink">Copy link</button>
  </div>
</main>

<footer>
  <div class="wrap">© 2025 PTD Today. Headlines link to their original publishers.</div>
</footer>

<script>
  // Parse query params
  const params = new URLSearchParams(location.search);
  // We pass data as URL-encoded strings
  const title = params.get("t") || "Article";
  const url   = params.get("u") || "#";
  const img   = params.get("i") || "";
  const dek   = params.get("d") || "";
  const tag   = params.get("g") || "news";
  const time  = params.get("p") || ""; // ISO or pubDate text

  // Fill UI
  document.title = "PTD Today | " + title;
  document.getElementById("title").textContent = title;
  document.getElementById("dek").textContent = dek;
  if (img) {
    const el = document.getElementById("img");
    el.src = img; el.style.display = "block";
  }
  document.getElementById("tag").textContent = tag.toUpperCase();
  document.getElementById("ago").textContent = time;

  const out = document.getElementById("out");
  out.href = url;

  // Build self URL for sharing
  const selfURL = location.origin + location.pathname + location.search;

  // Share buttons
  document.getElementById("shareNative").onclick = async () => {
    if (navigator.share){
      try { await navigator.share({title, text: dek, url: selfURL}); } catch {}
    } else {
      window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(title)+"&url="+encodeURIComponent(selfURL), "_blank");
    }
  };
  document.getElementById("shareTwitter").href  =
    "https://twitter.com/intent/tweet?text="+encodeURIComponent(title)+"&url="+encodeURIComponent(selfURL);
  document.getElementById("shareLinkedIn").href =
    "https://www.linkedin.com/sharing/share-offsite/?url="+encodeURIComponent(selfURL);

  document.getElementById("copyLink").onclick = async () => {
    try { await navigator.clipboard.writeText(selfURL); alert("Link copied!"); } catch {}
  };
</script>
</body>
</html>
