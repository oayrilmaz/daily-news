<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PTD Today — Daily Energy & Power News</title>

  <!-- Open Graph -->
  <meta property="og:site_name" content="PTD Today">
  <meta property="og:title" content="PTD Today — Daily Energy & Power News">
  <meta property="og:description" content="First to Know. First to Lead. Daily curated coverage for energy, power grids, HV substations, renewables, and more.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ptdtoday.com">
  <meta property="og:image" content="https://ptdtoday.com/assets/og-default.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="PTD Today — Daily Energy & Power News">
  <meta name="twitter:description" content="First to Know. First to Lead.">
  <meta name="twitter:image" content="https://ptdtoday.com/assets/og-default.png">

  <style>
    body { font-family: Georgia, serif; margin: 0; background: #fff; color: #111; }
    header { text-align: center; padding: 28px 0 12px 0; border-bottom: 1px solid #ddd; }
    header h1 { font-size: 3rem; margin: 0; font-weight: 700; }
    header p.motto { font-size: 1rem; margin: 4px 0 0 0; color: #555; }
    header h2 { font-size: 1.4rem; margin: 8px 0 0 0; font-weight: 600; }

    nav { text-align: center; padding: 12px 0; border-bottom: 1px solid #eee; }
    nav a { margin: 0 10px; text-decoration: none; color: #111; font-size: 1rem; }
    nav a.active { font-weight: bold; border-bottom: 2px solid #111; }

    .container { max-width: 900px; margin: 0 auto; padding: 20px; }
    .article { display: flex; flex-direction: row; gap: 16px; border-bottom: 1px solid #eee; padding: 20px 0; }
    .article img { width: 220px; height: 220px; object-fit: cover; flex-shrink: 0; }
    .article h3 { margin: 0; font-size: 1.4rem; line-height: 1.3; }
    .article p { margin: 8px 0; font-size: 1rem; line-height: 1.4; color: #333; }
    .meta { font-size: 0.85rem; color: #666; margin-top: 6px; }

    .buttons { margin-top: 8px; }
    .buttons a { margin-right: 10px; padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px;
      text-decoration: none; font-size: 0.85rem; color: #111; }

    footer { text-align: right; padding: 16px; font-size: 0.85rem; color: #666; border-top: 1px solid #ddd; }
  </style>
</head>
<body>
  <header>
    <h1>PTD Today</h1>
    <p class="motto">First to Know. First to Lead.</p>
    <h2>Daily Energy & Power News</h2>
  </header>

  <nav id="filters">
    <a href="#" data-cat="all" class="active">All</a>
    <a href="#" data-cat="Grid">Grid</a>
    <a href="#" data-cat="Substations">Substations</a>
    <a href="#" data-cat="Protection">Protection</a>
    <a href="#" data-cat="Cables">Cables</a>
    <a href="#" data-cat="HVDC">HVDC</a>
    <a href="#" data-cat="Renewables">Renewables</a>
    <a href="#" data-cat="Policy">Policy</a>
  </nav>

  <div class="container" id="news"></div>

  <footer>
    Updated — <span id="updated"></span>
    <button onclick="location.reload()">Refresh</button>
  </footer>

  <script>
    let articlesData = [];

    async function loadNews() {
      const response = await fetch("data/news.json");
      articlesData = await response.json();
      renderNews("all");
      document.getElementById("updated").textContent = new Date().toLocaleString();
    }

    function renderNews(category) {
      const container = document.getElementById("news");
      container.innerHTML = "";

      articlesData
        .filter(a => category === "all" || (a.category && a.category.toLowerCase().includes(category.toLowerCase())))
        .forEach(a => {
          const imgUrl = a.image && a.image.trim() !== "" ? a.image : "assets/og-default.png";

          const article = document.createElement("div");
          article.className = "article";
          article.innerHTML = `
            <img src="${imgUrl}" alt="">
            <div>
              <h3>${a.title}</h3>
              <p>${a.summary || ""}</p>
              <div class="meta">${a.category || ""} • ${a.time || ""}</div>
              <div class="buttons">
                <a href="article.html?u=${encodeURIComponent(a.url)}&t=${encodeURIComponent(a.title)}&d=${encodeURIComponent(a.summary)}&i=${encodeURIComponent(imgUrl)}">Open on PTD Today</a>
                <a href="${a.url}" target="_blank">Source</a>
                <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://ptdtoday.com/article.html?u=${encodeURIComponent(a.url)}" target="_blank">Share</a>
              </div>
            </div>
          `;
          container.appendChild(article);
        });
    }

    // handle filter clicks
    document.getElementById("filters").addEventListener("click", e => {
      if (e.target.tagName === "A") {
        e.preventDefault();
        document.querySelectorAll("#filters a").forEach(a => a.classList.remove("active"));
        e.target.classList.add("active");
        renderNews(e.target.dataset.cat);
      }
    });

    loadNews();
  </script>
</body>
</html>
