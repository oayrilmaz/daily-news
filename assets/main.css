// --- SHARE FUNCTION ---
function shareArticle(articleId) {
  const articleUrl = `https://ptdtoday.com/s/${articleId}.html`;
  const shareText = `Check out this article on PTD Today — your daily source for power transmission, distribution, and energy news:\n${articleUrl}`;
  
  const shareOptions = [
    { name: 'LinkedIn', url: `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(articleUrl)}` },
    { name: 'X (Twitter)', url: `https://twitter.com/intent/tweet?text=${encodeURIComponent('Latest from PTD Today: ')}${encodeURIComponent(articleUrl)}` },
    { name: 'Facebook', url: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(articleUrl)}` },
    { name: 'Reddit', url: `https://www.reddit.com/submit?url=${encodeURIComponent(articleUrl)}&title=${encodeURIComponent('Latest from PTD Today')}` },
    { name: 'Copy link', action: () => {
        navigator.clipboard.writeText(articleUrl);
        alert('✅ Link copied: ' + articleUrl);
      }
    },
    { name: 'Email', url: `mailto:?subject=${encodeURIComponent('Interesting read from PTD Today')}&body=${encodeURIComponent(shareText)}` },
  ];

  // Create modal dynamically
  const modal = document.createElement('div');
  modal.classList.add('share-modal');
  modal.innerHTML = `
    <div class="share-popup">
      ${shareOptions.map(opt =>
        opt.url
          ? `<button onclick="window.open('${opt.url}','_blank')">${opt.name}</button>`
          : `<button onclick="(${opt.action})();">${opt.name}</button>`
      ).join('')}
      <button onclick="document.body.removeChild(this.parentNode.parentNode)">Close ×</button>
    </div>
  `;
  
  // Styling for popup
  const style = document.createElement('style');
  style.innerHTML = `
    .share-modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.3); display: flex; justify-content: center; align-items: center;
    }
    .share-popup {
      background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.2);
      display: flex; flex-direction: column; gap: 10px; min-width: 250px;
    }
    .share-popup button {
      font-size: 16px; padding: 8px 10px; border: none; background: #f0f0f0; cursor: pointer;
      border-radius: 4px; transition: background 0.3s;
    }
    .share-popup button:hover { background: #e0e0e0; }
  `;
  
  document.head.appendChild(style);
  document.body.appendChild(modal);
}