<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PTD Today | Article</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;line-height:1.5}
    header,footer{border-bottom:1px solid #eee;padding:16px}
    footer{border-top:1px solid #eee;border-bottom:none}
    .wrap{max-width:900px;margin:0 auto;padding:0 16px}
    .hero{width:100%;max-height:460px;object-fit:cover;border:1px solid #eee}
    .chip{font-size:12px;border:1px solid #eee;padding:3px 8px;border-radius:999px;color:#666;margin-right:6px}
    .cta{display:inline-block;border:1px solid #111;padding:10px 14px;border-radius:8px;text-decoration:none;color:#111}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .min{border:1px solid #eee;padding:6px 10px;border-radius:6px;text-decoration:none;color:#111;background:#fafafa}
  </style>
</head>
<body>
<header><div class="wrap"><strong>PTD Today</strong> — Article</div></header>
<main class="wrap">
  <div style="margin:14px 0">
    <span class="chip" id="tag">—</span>
    <span class="chip" id="ago">—</span>
  </div>
  <h1 id="title">Loading…</h1>
  <img id="img" class="hero" alt="Article image" src="" style="display:none" />
  <p id="dek"></p>
  <a id="out" class="cta" target="_blank" rel="noopener">Read the full story →</a>
  <div class="row">
    <button class="min" id="shareNative">Share</button>
    <a class="min" id="shareLinkedIn" target="_blank" rel="noopener">Share to LinkedIn</a>
    <a class="min" id="shareX" target="_blank" rel="noopener">Share to X</a>
    <button class="min" id="copyLink">Copy link</button>
  </div>
</main>
<footer><div class="wrap">© PTD Today</div></footer>

<script>
  const q = new URLSearchParams(location.search);
  const title = decodeURIComponent(q.get("t")||"PTD Today");
  const url   = q.get("u") ? decodeURIComponent(q.get("u")) : "#";
  const img   = q.get("i") ? decodeURIComponent(q.get("i")) : "";
  const dek   = q.get("d") ? decodeURIComponent(q.get("d")) : "";
  const tag   = q.get("g") ? decodeURIComponent(q.get("g")) : "news";
  const time  = q.get("p") ? decodeURIComponent(q.get("p")) : "";

  document.title = "PTD Today | " + title;
  document.getElementById("title").textContent = title;
  document.getElementById("dek").textContent   = dek;
  document.getElementById("tag").textContent   = tag.toUpperCase();
  document.getElementById("ago").textContent   = time || "";
  if (img){ const el=document.getElementById("img"); el.src=img; el.style.display="block"; }
  document.getElementById("out").href = url;

  const self = location.origin + location.pathname + location.search;
  document.getElementById("shareLinkedIn").href = "https://www.linkedin.com/sharing/share-offsite/?url="+encodeURIComponent(self);
  document.getElementById("shareX").href        = "https://twitter.com/intent/tweet?text="+encodeURIComponent(title)+"&url="+encodeURIComponent(self);
  document.getElementById("copyLink").onclick = async () => { try{ await navigator.clipboard.writeText(self); alert("Copied!"); }catch{} };
  document.getElementById("shareNative").onclick = () => {
    if(navigator.share){ navigator.share({title, text: dek, url: self}).catch(()=>{}); }
    else window.open(document.getElementById("shareLinkedIn").href,"_blank");
  };
</script>
</body>
</html>
