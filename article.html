<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#d9c9aa" />
  <title>PTD Today — Article</title>
  <link rel="stylesheet" href="/assets/main.css" />
  <meta property="og:title" content="PTD Today — Article" />
  <meta property="og:image" content="/assets/og-default.png" />
  <meta property="og:description" content="Energy & Power Transmission News" />
</head>
<body>
  <header class="site-header">
    <h1><a href="/">PTD Today</a></h1>
    <p class="motto">First to Know. First to Lead.</p>
  </header>

  <main id="article-view">
    <div id="loading">Loading article...</div>
    <article id="article" style="display:none;">
      <h2 id="title"></h2>
      <div id="meta"></div>
      <img id="image" alt="" />
      <p id="summary"></p>
      <p><a id="source" href="#" target="_blank" rel="noopener">Read full article on source site →</a></p>
    </article>
  </main>

  <footer>
    <p>© <span id="yr"></span> PTD Today • Headlines link to their original publishers.</p>
  </footer>

  <script>
  // simple viewer
  document.getElementById('yr').textContent = new Date().getFullYear();

  async function loadArticle() {
    const p = new URLSearchParams(location.search);
    const id = p.get('id');
    if (!id) {
      document.getElementById('loading').textContent = 'No article selected.';
      return;
    }

    try {
      const res = await fetch('/data/news.json');
      const data = await res.json();
      const story = data.find(item => encodeURIComponent(item.title).toLowerCase().includes(id.toLowerCase()));

      if (!story) {
        document.getElementById('loading').textContent = 'Article not found.';
        return;
      }

      document.getElementById('title').textContent = story.title;
      document.getElementById('meta').textContent = `${story.publisher || ''} • ${story.category || ''}`;
      document.getElementById('summary').textContent = story.summary || '';
      if (story.image) {
        document.getElementById('image').src = story.image;
      } else {
        document.getElementById('image').style.display = 'none';
      }
      document.getElementById('source').href = story.url;

      document.getElementById('loading').style.display = 'none';
      document.getElementById('article').style.display = 'block';
      document.title = `PTD Today — ${story.title}`;
    } catch (e) {
      document.getElementById('loading').textContent = 'Error loading article.';
    }
  }

  loadArticle();
  </script>
</body>
</html>